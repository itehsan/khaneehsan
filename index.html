<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>منوی لقمه احسان + امتیازدهی</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');
    @font-face{font-family:'AdobeArabic';src:url('https://itehsan.github.io/khaneehsan/AdobeArabic-Regular.otf') format('opentype');}
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Vazirmatn',sans-serif;background:#1a1a1a;color:#fff;padding:1rem;min-height:100vh;overflow-x:hidden;}
    /* … قبل‌تر قرار داشته: برندینگ، منو، جستجو، تب‌ها، کانتینر محصولات، مودال و footer */
    /* … می‌تونی CSS اصلی خودت رو اینجا نگه‌داری یا قرار بدی */

    /* ===== استایل امتیازدهی ===== */
    .rating-box{margin-top:10px;text-align:center;}
    .stars{direction:ltr;display:inline-block;font-size:1.3rem;color:#ccc;cursor:pointer;}
    .stars span{padding:0 2px;}
    .stars .filled{color:gold;}
    .avg-rating{color:#f9c400;font-size:0.9rem;margin-top:5px;}
  </style>
</head>
<body>
  <div class="branding">…</div>
  <div class="header">…</div>
  <nav class="side-menu" id="sideMenu">…</nav>
  <div class="search-box">…</div>
  <div class="tabs">…</div>

  <div class="menu-container">
    <!-- مثال کامل برای همه غذاها -->
    <!-- ۱. سوپ جو -->
    <div class="menu-item" data-category="پیش غذا" onclick="showModal('سوپ جو','۸۳.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/soup.jpg')">
      <div class="info"><strong>سوپ جو</strong><span>۸۳.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="سوپ جو">
        <div class="stars">
          <span data-rate="1">★</span><span data-rate="2">★</span><span data-rate="3">★</span><span data-rate="4">★</span><span data-rate="5">★</span>
        </div>
        <div class="avg-rating">میانگین: <span class="avg">—</span></div>
      </div>
      <img src="https://itehsan.github.io/khaneehsan/soup.jpg" alt="سوپ جو">
    </div>

    <!-- ۲. آش جو -->
    <div class="menu-item" data-category="پیش غذا" onclick="showModal('آش جو','۱۰۹.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/ash.jpg')">
      <div class="info"><strong>آش جو</strong><span>۱۰۹.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="آش جو">
        <div class="stars">
          <span data-rate="1">★</span><span data-rate="2">★</span><span data-rate="3">★</span><span data-rate="4">★</span><span data-rate="5">★</span>
        </div>
        <div class="avg-rating">میانگین: <span class="avg">—</span></div>
      </div>
      <img src="https://itehsan.github.io/khaneehsan/ash.jpg" alt="آش جو">
    </div>

    <!-- ۳. حلیم گندم -->
    <div class="menu-item" data-category="پیش غذا" onclick="showModal('حلیم گندم','۱۴۸.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/haleam.jpg')">
      <div class="info"><strong>حلیم گندم</strong><span>۱۴۸.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="حلیم گندم">
        <div class="stars">
          <span data-rate="1">★</span><span data-rate="2">★</span><span data-rate="3">★</span><span data-rate="4">★</span><span data-rate="5">★</span>
        </div>
        <div class="avg-rating">میانگین: <span class="avg">—</span></div>
      </div>
      <img src="https://itehsan.github.io/khaneehsan/haleam.jpg" alt="حلیم گندم">
    </div>

    <!-- ۴. کوبیده گوسفندی -->
    <div class="menu-item" data-category="کباب ها" onclick="showModal('کوبیده گوسفندی','۱۱۱.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/gosfandy.jpg')">
      <div class="info"><strong>کوبیده گوسفندی</strong><span>۱۱۱.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="کوبیده گوسفندی">
        <div class="stars">…</div><div class="avg-rating">میانگین: <span class="avg">—</span></div>
      </div>
      <img src="https://itehsan.github.io/khaneehsan/gosfandy.jpg" alt="کوبیده گوسفندی">
    </div>

    <!-- ۵. کوبیده بوقلمون -->
    <div class="menu-item" data-category="کباب ها" onclick="showModal('کوبیده بوقلمون','۷۹.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/gosfandy.jpg')">
      <div class="info"><strong>کوبیده بوقلمون</strong><span>۷۹.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="کوبیده بوقلمون">
        <div class="stars">…</div><div class="avg-rating">میانگین: <span class="avg">—</span></div>
      </div>
      <img src="https://itehsan.github.io/khaneehsan/gosfandy.jpg" alt="کوبیده بوقلمون">
    </div>

    <!-- ۶. کباب لقمه گوسفندی -->
    <div class="menu-item" data-category="کباب ها" onclick="showModal('کباب لقمه گوسفندی','۱۸۴.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/gosfandy.jpg')">
      <div class="info"><strong>کباب لقمه گوسفندی</strong><span>۱۸۴.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="کباب لقمه گوسفندی">
        <div class="stars">…</div><div class="avg-rating">میانگین: <span class="avg">—</span></div>
      </div>
      <img src="https://itehsan.github.io/khaneehsan/gosfandy.jpg" alt="کباب لقمه گوسفندی">
    </div>

    <!-- ۷. کباب لقمه شتر -->
    <div class="menu-item" data-category="کباب ها" onclick="showModal('کباب لقمه شتر','۲۱۵.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/gosfandy.jpg')">
      <div class="info"><strong>کباب لقمه شتر</strong><span>۲۱۵.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="کباب لقمه شتر"><div class="stars">…</div><div class="avg-rating">میانگین: <span class="avg">—</span></div></div>
      <img src="https://itehsan.github.io/khaneehsan/gosfandy.jpg" alt="کباب لقمه شتر">
    </div>

    <!-- ۸. ساندویچ کوبیده گوسفندی -->
    <div class="menu-item" data-category="ساندویچ ها" onclick="showModal('ساندویچ کوبیده گوسفندی','۱۲۵.۰۰۰ تومان','https://itehsan.github.io/khaneehsan/gosfandy.jpg')">
      <div class="info"><strong>ساندویچ کوبیده گوسفندی</strong><span>۱۲۵.۰۰۰ تومان</span></div>
      <div class="rating-box" data-product="ساندویچ کوبیده گوسفندی">…</div>
      <img src="https://itehsan.github.io/khaneehsan/gosfandy.jpg" alt="ساندویچ کوبیده گوسفندی">
    </div>

    <!-- ۹. ساندویچ کوبیده بوقلمون -->
    <div class="menu-item" data-category="ساندویچ ها" onclick="showModal('ساندویچ کوبیده بوقلمون','۲۲۰.۰۰۰ ریال','https://itehsan.github.io/khaneehsan/gosfandy.jpg')">
      <div class="info"><strong>ساندویچ کوبیده بوقلمون</strong><span>۲۲۰.۰۰۰ ریال</span></div>
      <div class="rating-box" data-product="ساندویچ کوبیده بوقلمون">…</div>
      <img src="https://itehsan.github.io/khaneehsan/gosfandy.jpg" alt="ساندویچ کوبیده بوقلمون">
    </div>

    <!-- باقی محصولات -->
    <!-- ساندویچ لقمه گوسفندی، ساندویچ لقمه شتر، ساندویچ همبرگر بوقلمون -->
    <!-- دسر/چاشنی: آب زرشک، زیتون پرورده، سبزی خوردن -->
    <!-- نوشیدنی‌ها: دوغ نیم لیتری، دوغ خانواده، آب معدنی 1.5 لیتر، آب نیم لیتری -->
    <!-- هرکدام ساختاری مشابه دارند با عناصر rating-box و stars -->
  </div>

  <div class="modal" id="modal">…</div>
  <div class="footer">…</div>

  <script>
    // اسکریپت منو، مودال، جستجو و تب‌ها (مثل قبل)

    const GOOGLE_FORM_URL = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';

    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.rating-box').forEach(box => {
        const stars = box.querySelectorAll('.stars span');
        const avgDisplay = box.querySelector('.avg');
        const product = box.getAttribute('data-product');
        const saved = JSON.parse(localStorage.getItem('rating_' + product)) || { sum: 0, count: 0 };
        const updateAvg = () => {
          avgDisplay.textContent = saved.count ? (saved.sum / saved.count).toFixed(1) + ' ★' : '—';
        };
        updateAvg();

        stars.forEach(star => {
          star.addEventListener('click', () => {
            const rating = +star.dataset.rate;
            saved.sum += rating; saved.count++;
            localStorage.setItem('rating_' + product, JSON.stringify(saved));
            updateAvg();

            fetch(GOOGLE_FORM_URL, {method: 'POST',mode:'no-cors',headers:{'Content-Type':'application/json'},body:JSON.stringify({product,rating})});
            stars.forEach(s => s.classList.remove('filled'));
            stars.forEach((s,i) => { if(i < rating) s.classList.add('filled'); });
          });
        });
      });
    });
  </script>
</body>
</html>
